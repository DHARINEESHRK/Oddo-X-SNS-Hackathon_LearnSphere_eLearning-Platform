import{k as M,a as $,u as U,r as m,R as z,j as e,B as W,m as n,T as q,C as v,A as O,i as P}from"./index-DuUKt1XT.js";import{B as D}from"./BackButton-cMzes_Cx.js";import{S as j}from"./star-3zSC850D.js";import{B as H}from"./book-open-CMo2XJfR.js";import{C as g}from"./clock-DyIY91LQ.js";import{C as N}from"./circle-play-BgGq-UmH.js";import{C as Q}from"./circle-help-DNU43eMl.js";import{F as Y}from"./file-text-K6Ub3O_I.js";import"./arrow-left-BJ4-Mf8G.js";function te(u){const b=M(),h=$(),{getCourseById:w,getCourseReviews:F,getUserEnrollments:f,enrollInCourse:p,currentUser:o}=U(),l=u.courseId||b.courseId||"",C=u.onBack||(()=>h("/courses")),A=u.onLessonClick||(s=>h(`/player/${l}/${s}`)),[x,B]=m.useState("overview"),t=w(l),c=m.useMemo(()=>{if(o)return f(o.id).find(s=>s.courseId===l)},[o,l,f]);z.useEffect(()=>{o&&t&&!c&&p(o.id,l)},[o,t,c,p,l]);const i=m.useMemo(()=>{if(!t)return{title:"Course Not Found",description:"",instructor:"",totalLessons:0,completedLessons:0,progress:0,rating:0,reviewCount:0};const s=c?.completedLessons?.length??0,a=t.lessons.length;return{title:t.title,description:t.description,instructor:t.instructorName,totalLessons:a,completedLessons:s,progress:a>0?Math.round(s/a*100):0,rating:t.rating,reviewCount:t.reviewsCount}},[t,c]),k=m.useMemo(()=>{if(!t)return[];const s=new Set(c?.completedLessons??[]);let a=!1;return t.lessons.map(r=>{const d=s.has(r.id),S=!d&&a;!d&&!a&&(a=!0);const R=r.videoUrl?"video":r.title.toLowerCase().includes("quiz")?"quiz":"pdf";return{id:r.id,title:r.title,type:R,duration:r.duration,isCompleted:d,isLocked:S}})},[t,c]),y=F(l),I=m.useMemo(()=>y.map(s=>({id:s.id,userName:s.userName,userAvatar:s.userAvatar||s.userName.split(" ").map(a=>a[0]).join(""),rating:s.rating,date:new Date(s.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),comment:s.comment})),[y]),L=[{id:"overview",label:"Overview"},{id:"reviews",label:"Reviews"}],E=s=>{switch(s){case"video":return N;case"pdf":return Y;case"quiz":return Q;default:return N}},T=s=>{switch(s){case"video":return"bg-[#6E5B6A]/10 text-[#6E5B6A]";case"pdf":return"bg-[#F5AE35]/10 text-[#F5AE35]";case"quiz":return"bg-[#9AACB6]/10 text-[#9AACB6]";default:return"bg-gray-100 text-gray-600"}};return e.jsxs("div",{className:"min-h-screen bg-[#F1F2F4] relative overflow-hidden",children:[e.jsx(W,{}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"px-6 py-6 max-w-6xl mx-auto",children:e.jsx(D,{onClick:C,label:"Back to Courses"})}),e.jsxs(n.div,{className:"px-6 max-w-6xl mx-auto mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-5xl md:text-6xl text-[#202732] mb-4",style:{fontFamily:"Caveat, cursive",fontWeight:700},children:i.title}),e.jsx("p",{className:"text-lg text-gray-600 max-w-3xl",style:{fontFamily:"Inter, sans-serif"},children:i.description})]}),e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#6E5B6A] to-[#8b7d8e] flex items-center justify-center text-white font-semibold",children:"SM"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",style:{fontFamily:"Inter, sans-serif"},children:"Instructor"}),e.jsx("p",{className:"font-semibold text-[#202732]",style:{fontFamily:"Inter, sans-serif"},children:i.instructor})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-5 h-5 fill-[#F5AE35] text-[#F5AE35]"}),e.jsx("span",{className:"font-semibold text-[#202732]",style:{fontFamily:"Inter, sans-serif"},children:i.rating}),e.jsxs("span",{className:"text-gray-500 text-sm",style:{fontFamily:"Inter, sans-serif"},children:["(",i.reviewCount," reviews)"]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-[#2FBF71]"}),e.jsx("span",{className:"font-semibold text-[#202732]",style:{fontFamily:"Inter, sans-serif"},children:"Your Progress"})]}),e.jsxs("span",{className:"text-2xl font-bold text-[#2FBF71]",style:{fontFamily:"Caveat, cursive"},children:[i.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4 overflow-hidden",children:e.jsx(n.div,{className:"bg-[#2FBF71] h-full rounded-full",initial:{width:0},animate:{width:`${i.progress}%`},transition:{duration:1,delay:.3,ease:"easeOut"}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(H,{className:"w-4 h-4 text-[#6E5B6A]"}),e.jsx("span",{className:"text-2xl font-bold text-[#6E5B6A]",style:{fontFamily:"Caveat, cursive"},children:i.totalLessons})]}),e.jsx("p",{className:"text-sm text-gray-600",style:{fontFamily:"Inter, sans-serif"},children:"Total Lessons"})]}),e.jsxs("div",{className:"text-center border-x border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(v,{className:"w-4 h-4 text-[#2FBF71]"}),e.jsx("span",{className:"text-2xl font-bold text-[#2FBF71]",style:{fontFamily:"Caveat, cursive"},children:i.completedLessons})]}),e.jsx("p",{className:"text-sm text-gray-600",style:{fontFamily:"Inter, sans-serif"},children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[e.jsx(g,{className:"w-4 h-4 text-[#F5AE35]"}),e.jsx("span",{className:"text-2xl font-bold text-[#F5AE35]",style:{fontFamily:"Caveat, cursive"},children:i.totalLessons-i.completedLessons})]}),e.jsx("p",{className:"text-sm text-gray-600",style:{fontFamily:"Inter, sans-serif"},children:"Remaining"})]})]})]})]}),e.jsx("div",{className:"px-6 max-w-6xl mx-auto mb-8",children:e.jsx("div",{className:"flex gap-8 border-b border-gray-300 relative",children:L.map(s=>e.jsxs("button",{onClick:()=>B(s.id),className:"relative pb-4",children:[e.jsx("span",{className:`text-lg transition-colors ${x===s.id?"text-[#6E5B6A] font-semibold":"text-gray-500 hover:text-[#6E5B6A]"}`,style:{fontFamily:"Inter, sans-serif"},children:s.label}),x===s.id&&e.jsx(n.div,{className:"absolute bottom-0 left-0 right-0 h-0.5",layoutId:"activeTab",children:e.jsx("svg",{width:"100%",height:"2",viewBox:"0 0 100 2",preserveAspectRatio:"none",className:"absolute bottom-0 left-0",children:e.jsx(n.path,{d:"M0,1 Q25,0 50,1 T100,1",stroke:"#F5AE35",strokeWidth:"3",fill:"none",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{duration:.6,ease:"easeInOut"}})})})]},s.id))})}),e.jsx("div",{className:"px-6 max-w-6xl mx-auto pb-12",children:e.jsxs(O,{mode:"wait",children:[x==="overview"&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-3xl text-[#202732] mb-6",style:{fontFamily:"Caveat, cursive",fontWeight:700},children:"Course Content"}),e.jsx("div",{className:"space-y-3",children:k.map((s,a)=>{const r=E(s.type);return e.jsxs(n.button,{onClick:()=>!s.isLocked&&A(s.id),disabled:s.isLocked,className:`w-full flex items-center gap-4 p-4 rounded-xl transition-all ${s.isLocked?"bg-gray-100 cursor-not-allowed opacity-60":s.isCompleted?"bg-[#2FBF71]/5 hover:bg-[#2FBF71]/10":"bg-gray-50 hover:bg-gray-100 hover:shadow-md"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:a*.05},whileHover:s.isLocked?{}:{scale:1.01,x:5},children:[e.jsx("div",{className:"flex-shrink-0",children:s.isLocked?e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(P,{className:"w-5 h-5 text-gray-500"})}):s.isCompleted?e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#2FBF71] flex items-center justify-center",children:e.jsx(v,{className:"w-5 h-5 text-white"})}):e.jsx("div",{className:"w-10 h-10 rounded-full bg-[#6E5B6A]/10 flex items-center justify-center",children:e.jsx(r,{className:"w-5 h-5 text-[#6E5B6A]"})})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("h4",{className:"font-semibold text-[#202732] mb-1",style:{fontFamily:"Inter, sans-serif"},children:s.title}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${T(s.type)}`,style:{fontFamily:"Inter, sans-serif"},children:s.type.toUpperCase()}),e.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1",style:{fontFamily:"Inter, sans-serif"},children:[e.jsx(g,{className:"w-3 h-3"}),s.duration]})]})]}),!s.isLocked&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:"text-[#6E5B6A]",children:e.jsx("path",{d:"M7 4l6 6-6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},s.id)})})]})},"overview"),x==="reviews"&&e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:[e.jsx("h3",{className:"text-3xl text-[#202732] mb-6",style:{fontFamily:"Caveat, cursive",fontWeight:700},children:"Student Reviews"}),e.jsx("div",{className:"space-y-6",children:I.map((s,a)=>e.jsx(n.div,{className:"border-b border-gray-200 pb-6 last:border-0",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.1},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#6E5B6A] to-[#8b7d8e] flex items-center justify-center text-white font-semibold flex-shrink-0",children:s.userAvatar}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-[#202732]",style:{fontFamily:"Inter, sans-serif"},children:s.userName}),e.jsx("span",{className:"text-sm text-gray-500",style:{fontFamily:"Inter, sans-serif"},children:s.date})]}),e.jsx("div",{className:"flex items-center gap-1 mb-3",children:[...Array(5)].map((r,d)=>e.jsx(j,{className:`w-4 h-4 ${d<s.rating?"fill-[#F5AE35] text-[#F5AE35]":"text-gray-300"}`},d))}),e.jsx("p",{className:"text-gray-600 leading-relaxed",style:{fontFamily:"Inter, sans-serif"},children:s.comment})]})]})},s.id))})]})},"reviews")]})})]})]})}export{te as StudentCourseDetail};
